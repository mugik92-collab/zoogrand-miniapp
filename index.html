<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ZooGrand73</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;font-family:system-ui;background:#f6f7f9}
header{text-align:center;padding:14px;background:#fff;box-shadow:0 4px 20px #0001}
.container{padding:14px;padding-bottom:120px}
.card{background:#fff;padding:14px;border-radius:18px;margin-bottom:12px;box-shadow:0 6px 20px #0002}
button{width:100%;padding:14px;border-radius:14px;border:none;background:#ff9800;color:#fff;font-weight:800}
.price{font-size:1.2rem;font-weight:800;text-align:right}
</style>
</head>

<body>

<header>
  <img src="logo.png" height="48"><br>
  <small>Ð·Ð°Ð±Ð¾Ñ‚Ð° â€¢ ÑƒÑŽÑ‚ â€¢ Ð´Ð¾Ð²ÐµÑ€Ð¸Ðµ</small>
</header>

<div class="container" id="items"></div>

<div class="card">
<div class="price" id="total">Ð˜Ñ‚Ð¾Ð³Ð¾: 0 â‚½</div>
<button onclick="sendOrder()">ðŸ›’ ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready(); tg.expand();

let cart=[];
let products={};

fetch("products.json")
.then(r=>r.json())
.then(data=>{
 products=data;
 render();
});

function render(){
 let box=document.getElementById("items");
 box.innerHTML="";
 Object.keys(products).forEach(cat=>{
  box.innerHTML+=`<h3>${cat}</h3>`;
  products[cat].forEach(p=>{
   box.innerHTML+=`
   <div class="card">
    <b>${p.name}</b><br>
    ${p.desc}<br>
    ${p.price} â‚½
    <button onclick="add('${p.name}',${p.price})">Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ</button>
   </div>`;
  });
 });
}

function add(name,price){
 cart.push({name,price});
 calc();
}

function calc(){
 let sum=cart.reduce((s,i)=>s+i.price,0);
 total.innerText="Ð˜Ñ‚Ð¾Ð³Ð¾: "+sum+" â‚½";
}

function sendOrder(){
 let text="ðŸ¾ Ð—Ð°ÐºÐ°Ð· ZooGrand73\n\n";
 cart.forEach((i,n)=>text+=`${n+1}. ${i.name} â€” ${i.price} â‚½\n`);
 text+=`\n${total.innerText}`;
 tg.sendData(text);
}
</script>

</body>
</html>
