<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>ZooGrand73 ‚Äî –£–ª—å—è–Ω–æ–≤—Å–∫</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root {
      --accent: #ff9800;
      --accent-dark: #e67e22;
      --green: #4caf50;
      --gray: #666;
      --danger: #e74c3c;
      --shadow: 0 4px 16px rgba(0,0,0,0.08);
    }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #f8f9fa;
      color: #2d2d2d;
      min-height: 100vh;
    }

    header {
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 1.5rem;
      font-weight: 700;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .container {
      padding: 1rem;
      padding-bottom: 140px;
    }

    /* –ë–∞–Ω–Ω–µ—Ä */
    .banner-container {
      position: relative;
      height: 300px;
      margin-bottom: 1.5rem;
      overflow: hidden;
      border-radius: 0 0 24px 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .main-banner {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .banner-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
      text-shadow: 0 4px 12px rgba(0,0,0,0.7);
      z-index: 2;
      width: 90%;
    }

    .banner-title {
      font-size: 2.4rem;
      font-weight: 900;
      margin: 0 0 0.5rem;
      opacity: 0;
      animation: textSlideTop 1s ease-out forwards 0.6s;
    }

    .banner-subtitle {
      font-size: 1.6rem;
      font-weight: 700;
      color: #ffe066;
      opacity: 0;
      animation: textSlideBottom 1s ease-out forwards 1s;
    }

    @keyframes textSlideTop {
      from { opacity: 0; transform: translateY(-50px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes textSlideBottom {
      from { opacity: 0; transform: translateY(50px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
    .category-grid {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
      margin: 1.5rem 0;
    }

    .category-card {
      background: white;
      border-radius: 16px;
      padding: 1.2rem 1.6rem;
      text-align: center;
      box-shadow: var(--shadow);
      cursor: pointer;
      min-width: 110px;
      transition: all 0.25s ease;
    }

    .category-card:hover {
      transform: translateY(-8px) scale(1.05);
      box-shadow: 0 12px 32px rgba(0,0,0,0.15);
    }

    .category-card i {
      font-size: 2.6rem;
      margin-bottom: 0.6rem;
      color: var(--accent);
    }

    /* –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
    .subcategory-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.2rem;
    }

    .subcategory-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .subcategory-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 32px rgba(0,0,0,0.18);
    }

    .subcategory-img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: #eee;
    }

    .subcategory-content {
      padding: 1rem;
    }

    .price {
      color: var(--accent);
      font-weight: 700;
      font-size: 1.3rem;
      margin: 0.5rem 0;
    }

    .utp {
      color: #27ae60;
      font-weight: 700;
      margin: 0.5rem 0;
    }

    /* –ö–Ω–æ–ø–∫–∏ */
    .back-btn, .add-btn, .qty-btn, #orderBtn, #clearCartBtn, .modal-btn {
      cursor: pointer;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.2s;
    }

    .back-btn { background: #e0e0e0; color: #333; padding: 0.8rem 1.4rem; }
    .add-btn { background: var(--green); color: white; padding: 0.9rem; width: 100%; }
    .qty-btn { width: 44px; height: 44px; border-radius: 50%; background: #eee; font-size: 1.4rem; }

    /* –ö–æ—Ä–∑–∏–Ω–∞ */
    #cart-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 -4px 16px rgba(0,0,0,0.15);
      padding: 0.8rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
    }

    #cartList { margin: 1rem 0; padding-bottom: 5rem; }
    .cart-item { background: white; border-radius: 12px; padding: 1rem; margin-bottom: 1rem; box-shadow: var(--shadow); }

    /* –ú–æ–¥–∞–ª–∫–∞ */
    #orderModal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }

    .modal-content {
      background: white;
      border-radius: 16px;
      padding: 1.8rem;
      width: 90%;
      max-width: 420px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .hidden { display: none !important; }

    footer {
      position: fixed;
      bottom: 60px;
      left: 0;
      right: 0;
      background: white;
      padding: 12px;
      text-align: center;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      font-size: 0.9rem;
      z-index: 90;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
      margin: 0 8px;
      font-weight: 600;
    }

    .phone { color: #27ae60; font-weight: bold; }
  </style>
</head>
<body>

<header>ZooGrand73 ‚Äî –£–ª—å—è–Ω–æ–≤—Å–∫</header>

<div class="container">

  <div id="mainScreen">
    <div class="banner-container">
      <img class="main-banner" 
           src="https://files.catbox.moe/3m4j1k.jpg" 
           alt="–°—á–∞—Å—Ç–ª–∏–≤—ã–µ –ø–∏—Ç–æ–º—Ü—ã" 
           loading="eager">
      <div class="banner-text">
        <div class="banner-title">–°–ß–ê–°–¢–õ–ò–í–´–ï –ü–ò–¢–û–ú–¶–´</div>
        <div class="banner-subtitle">‚Äì –°–ß–ê–°–¢–õ–ò–í–ê–Ø –°–ï–ú–¨–Ø!</div>
      </div>
    </div>

    <div class="category-grid">
      <div class="category-card" onclick="showCategory('–õ–µ–∂–∞–Ω–∫–∏')">
        <i class="fas fa-bed"></i><div>–õ–µ–∂–∞–Ω–∫–∏</div>
      </div>
      <div class="category-card" onclick="showCategory('–ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞')">
        <i class="fas fa-paw"></i><div>–ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞</div>
      </div>
      <div class="category-card" onclick="showCategory('–í–∫—É—Å–Ω—è—à–∫–∏')">
        <i class="fas fa-bone"></i><div>–í–∫—É—Å–Ω—è—à–∫–∏</div>
      </div>
    </div>
  </div>

  <div id="categoryScreen" class="hidden">
    <button class="back-btn" onclick="backToMain()">‚Üê –ù–∞–∑–∞–¥</button>
    <h2 id="categoryTitle"></h2>

    <div id="subcategoryGrid" class="subcategory-grid"></div>

    <div id="calcPanel" class="hidden">
      <h3 id="calcTitle"></h3>

      <div class="qty-control" id="qtyPanel">
        <button class="qty-btn" onclick="changeQty(-1)">‚àí</button>
        <input type="number" id="qtyInput" value="1" min="1" onchange="updateCalc()">
        <button class="qty-btn" onclick="changeQty(1)">+</button>
      </div>

      <div id="nightsInfo" style="font-size:1.1rem; margin:1rem 0;">
        –ö–æ–ª-–≤–æ: <strong id="qtyDisplay">1</strong> ‚Ä¢ –°—É–º–º–∞: <strong id="calcPrice">0 ‚ÇΩ</strong>
      </div>
      <div id="discountBlock" style="color:#27ae60; font-weight:700; margin-top:0.5rem; font-size:1.05rem;"></div>

      <button class="add-btn" onclick="addToCartFromCalc()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>

    <div id="cartList"></div>
  </div>

</div>

<div id="cart-bar" class="hidden">
  <div>–ö–æ—Ä–∑–∏–Ω–∞: <strong id="cartCount">0</strong> ‚Ä¢ <strong id="cartTotal">0 ‚ÇΩ</strong></div>
  <div>
    <button id="clearCartBtn" onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å</button>
    <button id="orderBtn" onclick="showOrderModal()">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
  </div>
</div>

<footer>
  <div>
    <a href="https://t.me/zoogrand73" target="_blank">Telegram-–≥—Ä—É–ø–ø–∞</a> ‚Ä¢ 
    <a href="https://vk.com/zoogrand73" target="_blank">VK-–≥—Ä—É–ø–ø–∞</a> ‚Ä¢ 
    <a href="https://zoogrand73.tilda.ws" target="_blank">–°–∞–π—Ç</a>
  </div>
  <div class="phone">üìû +7-999-190-10-89 (–ó—É–ª—å—Ñ–∏—è)</div>
</footer>

<div id="orderModal" class="hidden">
  <div class="modal-content">
    <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π / –ø–æ–∂–µ–ª–∞–Ω–∏—è:</label>
    <textarea id="orderComment" placeholder="–ü–æ—Ä–æ–¥–∞, –∫–ª–∏—á–∫–∞, –∞–ª–ª–µ—Ä–≥–∏–∏, –∞–¥—Ä–µ—Å –≤ –£–ª—å—è–Ω–æ–≤—Å–∫–µ..."></textarea>

    <div style="display:flex; gap:1rem; margin-top:1.5rem;">
      <button class="modal-btn" style="background:#ccc; color:#333; flex:1;" onclick="closeOrderModal()">–û—Ç–º–µ–Ω–∞</button>
      <button class="modal-btn" style="background:var(--accent); color:white; flex:1;" onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
  </div>
</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready(); tg.expand();

  // –î–∞–Ω–Ω—ã–µ (–≤—Å–µ —Ç–≤–æ–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ + —Å–∫–∏–¥–∫–∞ –æ—Ç 500 –≥)
  const products = {
    "–õ–µ–∂–∞–Ω–∫–∏": [
      {sub:"–õ–µ–∂–∞–Ω–∫–∞-–æ–≤–∞–ª –≠–∫–æ–Ω–æ–º", price:800},
      {sub:"–õ–µ–∂–∞–Ω–∫–∞-–ø–æ–Ω—á–∏–∫ –ö–ª–∞—Å—Å–∏–∫", price:1200},
      {sub:"–õ–µ–∂–∞–Ω–∫–∞ –û—Ä—Ç–æ–ø–µ–¥", price:1400},
      {sub:"–õ–µ–∂–∞–Ω–∫–∞-–¥–∏–≤–∞–Ω–∞ –ü—Ä–µ–º–∏—É–º", price:1500},
      {sub:"–õ–µ–∂–∞–Ω–∫–∞-–º–∞—Ç—Ä–∞—Å –ì–∏–≥–∞–Ω—Ç", price:1600}
    ],
    "–ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞": [
      {sub:"–ú–∏–Ω–∏ / –¢–æ–π", price:650},
      {sub:"–ú–∞–ª–µ–Ω—å–∫–∏–µ", price:900},
      {sub:"–ú–∞–ª–µ–Ω—å–∫–∏–µ-—Å—Ä–µ–¥–Ω–∏–µ", price:1100},
      {sub:"–°—Ä–µ–¥–Ω–∏–µ", price:1300},
      {sub:"–ö—Ä—É–ø–Ω—ã–µ", price:1900},
      {sub:"–û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–µ / –ì–∏–≥–∞–Ω—Ç—ã", price:3500}
    ],
    "–í–∫—É—Å–Ω—è—à–∫–∏": [
      {sub:"–õ–µ–≥–∫–æ–µ –≥–æ–≤—è–∂—å–µ 100 –≥", price:100},
      {sub:"–†—É–±–µ—Ü –≥–æ–≤—è–∂–∏–π 100 –≥", price:100},
      {sub:"–í—ã–º—è –≥–æ–≤—è–∂—å–µ", price:110},
      {sub:"–¢—Ä–∞—Ö–µ—è –≥–æ–≤—è–∂—å—è", price:130},
      {sub:"–ë—ã—á—å–∏ —Å–µ–º–µ–Ω–Ω–∏–∫–∏", price:150},
      {sub:"–ë—ã—á–∏–π –∫–æ—Ä–µ–Ω—å", price:230},
      {sub:"–ì–æ–≤—è–∂—å–∏ –ø–æ—á–∫–∏", price:100}
    ]
  };

  let cart = [];
  let currentItem = null;

  function showCategory(cat) {
    document.getElementById('mainScreen').classList.add('hidden');
    document.getElementById('categoryScreen').classList.remove('hidden');
    document.getElementById('categoryTitle').textContent = cat;

    document.getElementById('subcategoryGrid').classList.remove('hidden');
    document.getElementById('calcPanel').classList.add('hidden');

    renderSubcategories(cat);
    renderCartList();
  }

  function renderSubcategories(category) {
    const grid = document.getElementById('subcategoryGrid');
    grid.innerHTML = '';

    const items = products[category] || [];

    items.forEach((item, i) => {
      const card = document.createElement('div');
      card.className = 'subcategory-card';
      card.innerHTML = `
        <img src="https://placehold.co/400x180/eee/333?text=${encodeURIComponent(item.sub)}" alt="${item.sub}">
        <div class="subcategory-content">
          <h3>${item.sub}</h3>
          <div class="price">${item.price} ‚ÇΩ</div>
        </div>
      `;
      card.onclick = () => openCalculator(item);
      grid.appendChild(card);
    });
  }

  function openCalculator(item) {
    currentItem = item;
    document.getElementById('subcategoryGrid').classList.add('hidden');
    document.getElementById('calcPanel').classList.remove('hidden');
    document.getElementById('calcTitle').textContent = item.sub;

    document.getElementById('qtyInput').value = 1;
    updateCalc();
  }

  function updateCalc() {
    let qty = parseInt(document.getElementById('qtyInput').value) || 1;
    let price = currentItem.price;
    let total = qty * price;

    // –°–∫–∏–¥–∫–∞ 5% –æ—Ç 500 –≥ (–¥–ª—è –í–∫—É—Å–Ω—è—à–µ–∫)
    let discount = 0;
    if (currentItem.category === '–í–∫—É—Å–Ω—è—à–∫–∏' && qty >= 5) {
      discount = 0.05;
    }

    let final = total * (1 - discount);

    document.getElementById('qtyDisplay').textContent = qty;
    document.getElementById('calcPrice').textContent = final.toFixed(0) + ' ‚ÇΩ';

    const discEl = document.getElementById('discountBlock');
    if (discount > 0) {
      discEl.textContent = '–°–∫–∏–¥–∫–∞ 5% –æ—Ç 500 –≥—Ä–∞–º–º!';
      discEl.style.display = 'block';
    } else {
      discEl.style.display = 'none';
    }
  }

  function changeQty(delta) {
    let input = document.getElementById('qtyInput');
    let v = parseInt(input.value) || 1;
    input.value = Math.max(1, v + delta);
    updateCalc();
  }

  function addToCartFromCalc() {
    if (!currentItem) return;

    let qty = parseInt(document.getElementById('qtyInput').value) || 1;

    const exist = cart.find(e => e.sub === currentItem.sub);
    if (exist) {
      exist.quantity += qty;
    } else {
      cart.push({ ...currentItem, quantity: qty });
    }

    tg.showPopup({message: `–î–æ–±–∞–≤–ª–µ–Ω–æ: ${qty} √ó ${currentItem.sub}`});
    updateCart();
    renderCartList();
    backToMain();
  }

  function renderCartList() {
    const list = document.getElementById('cartList');
    list.innerHTML = cart.length === 0 ? '<p style="text-align:center;color:#999;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>' : '';

    cart.forEach(item => {
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <div class="cart-item-title">${item.sub}</div>
        <div>${item.quantity} —à—Ç. √ó ${item.price} ‚ÇΩ</div>
        <div class="price">${(item.quantity * item.price).toFixed(0)} ‚ÇΩ</div>
      `;
      list.appendChild(div);
    });
  }

  function updateCart() {
    let count = cart.reduce((sum, item) => sum + item.quantity, 0);
    let total = cart.reduce((sum, item) => sum + item.quantity * item.price, 0);

    document.getElementById('cartCount').textContent = count;
    document.getElementById('cartTotal').textContent = total.toFixed(0) + ' ‚ÇΩ';
    document.getElementById('cart-bar').classList.toggle('hidden', count === 0);
  }

  function clearCart() {
    if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')) {
      cart = [];
      updateCart();
      renderCartList();
    }
  }

  function backToMain() {
    document.getElementById('categoryScreen').classList.add('hidden');
    document.getElementById('mainScreen').classList.remove('hidden');
  }

  function showOrderModal() {
    document.getElementById('orderModal').classList.remove('hidden');
  }

  function closeOrderModal() {
    document.getElementById('orderModal').classList.add('hidden');
  }

  function sendOrder() {
    let text = '–ó–∞–∫–∞–∑ ZooGrand73\n\n';
    cart.forEach(item => {
      text += `${item.sub} √ó ${item.quantity} = ${item.quantity * item.price} ‚ÇΩ\n`;
    });
    let total = cart.reduce((s, e) => s + e.quantity * e.price, 0);
    text += `\n–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ\n\n`;
    text += document.getElementById('orderComment').value.trim();

    tg.sendData(text);
    tg.showAlert('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
    cart = [];
    updateCart();
    closeOrderModal();
  }

  updateCart();
</script>
</body>
</html>
