<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZooGrand73</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
    margin:0;
    font-family:system-ui;
    background:#f4f5f7;
}
header{
    background:linear-gradient(135deg,#ff9800,#ffb347);
    color:#fff;
    padding:14px;
    text-align:center;
    font-size:1.4rem;
    font-weight:800;
}
.container{padding:14px;padding-bottom:200px}

.banner{
    height:220px;
    border-radius:0 0 22px 22px;
    background:url("https://images.unsplash.com/photo-1601758173925-196ea9f3b2f5?q=80&w=1200") center/cover;
    box-shadow:0 8px 25px #0003;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    text-align:center;
}
.banner h1{
    font-size:2rem;
    text-shadow:0 4px 12px #000;
}

.categories{
    display:flex;
    gap:14px;
    justify-content:center;
    margin-top:20px;
}
.cat{
    background:#fff;
    width:110px;
    border-radius:18px;
    text-align:center;
    padding:14px;
    box-shadow:0 6px 20px #0002;
    cursor:pointer;
}
.cat img{
    width:60px;
    height:60px;
    object-fit:contain;
    margin-bottom:6px;
}

.hidden{display:none}

.card{
    background:#fff;
    padding:14px;
    border-radius:18px;
    margin-bottom:12px;
    box-shadow:0 6px 20px #0002;
}

button{
    background:#ff9800;
    border:none;
    color:#fff;
    padding:10px 14px;
    border-radius:12px;
    font-weight:700;
    cursor:pointer;
}

input,textarea,select{
    width:100%;
    padding:10px;
    border-radius:12px;
    border:1px solid #ddd;
    margin-bottom:8px;
}

#cart{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    background:#fff;
    border-radius:20px 20px 0 0;
    box-shadow:0 -6px 20px #0003;
    padding:14px;
    z-index:100;
}
.cart-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:6px;
}
.qty button{
    background:#eee;
    color:#333;
    padding:4px 8px;
    margin:0 4px;
}
.total{
    font-weight:800;
    font-size:1.2rem;
    text-align:right;
}
</style>
</head>

<body>

<header>ZooGrand73 ‚Ä¢ –£–ª—å—è–Ω–æ–≤—Å–∫</header>

<div class="container">

<div class="banner">
    <h1>–°—á–∞—Å—Ç–ª–∏–≤—ã–µ –ø–∏—Ç–æ–º—Ü—ã<br>‚Äî —Å—á–∞—Å—Ç–ª–∏–≤–∞—è —Å–µ–º—å—è üêæ</h1>
</div>

<!-- –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù -->
<div id="main">
    <div class="categories">
        <div class="cat" onclick="openCategory('–õ–µ–∂–∞–Ω–∫–∏')">
            <img src="https://cdn-icons-png.flaticon.com/512/616/616430.png">
            –õ–µ–∂–∞–Ω–∫–∏
        </div>
        <div class="cat" onclick="openCategory('–ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞')">
            <img src="https://cdn-icons-png.flaticon.com/512/194/194279.png">
            –ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞
        </div>
        <div class="cat" onclick="openCategory('–í–∫—É—Å–Ω—è—à–∫–∏')">
            <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png">
            –í–∫—É—Å–Ω—è—à–∫–∏
        </div>
    </div>
</div>

<!-- –ö–ê–¢–ê–õ–û–ì -->
<div id="catalog" class="hidden">
    <button onclick="back()">‚Üê –ù–∞–∑–∞–¥</button>
    <h2 id="title"></h2>
    <div id="items"></div>

    <h3>üêï –ü–∏—Ç–æ–º–µ—Ü</h3>
    <input id="petName" placeholder="–ö–ª–∏—á–∫–∞">
    <input id="petBreed" placeholder="–ü–æ—Ä–æ–¥–∞">

    <h3>üè† –ê–¥—Ä–µ—Å</h3>
    <input id="address" placeholder="–ê–¥—Ä–µ—Å">

    <h3>üìÖ –ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞</h3>
    <input type="date" id="startDate">
    <input type="number" id="days" placeholder="–ö–æ–ª-–≤–æ —Å—É—Ç–æ–∫">
    <div style="display:flex;gap:6px">
        <input type="time" id="checkIn">
        <input type="time" id="checkOut">
    </div>

    <h3>üßæ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
    <textarea id="comment"></textarea>
</div>

</div>

<!-- –ö–û–†–ó–ò–ù–ê -->
<div id="cart" class="hidden">
    <div id="cartItems"></div>
    <div class="total">–ò—Ç–æ–≥–æ: <span id="total">0 ‚ÇΩ</span></div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready(); tg.expand();

tg.MainButton.setText("üõí –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑");
tg.MainButton.color = "#ff9800";
tg.MainButton.textColor = "#ffffff";

let cart = [];

const products = {
    "–õ–µ–∂–∞–Ω–∫–∏":[
        {name:"–õ–µ–∂–∞–Ω–∫–∞ –≠–∫–æ–Ω–æ–º",price:800},
        {name:"–õ–µ–∂–∞–Ω–∫–∞ –ü—Ä–µ–º–∏—É–º",price:1500}
    ],
    "–ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞":[
        {name:"–ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞ (—Å—É—Ç–∫–∏)",price:1200}
    ],
    "–í–∫—É—Å–Ω—è—à–∫–∏":[
        {name:"–õ–µ–≥–∫–æ–µ –≥–æ–≤—è–∂—å–µ",price:100},
        {name:"–†—É–±–µ—Ü –≥–æ–≤—è–∂–∏–π",price:100}
    ]
};

function openCategory(cat){
    main.classList.add("hidden");
    catalog.classList.remove("hidden");
    title.innerText = cat;
    items.innerHTML = "";

    products[cat].forEach(p=>{
        let el=document.createElement("div");
        el.className="card";

        if(cat==="–í–∫—É—Å–Ω—è—à–∫–∏"){
            el.innerHTML=`
                <b>${p.name}</b>
                <select onchange="addTreat('${p.name}',${p.price},this.value)">
                    <option value="">–í—ã–±—Ä–∞—Ç—å –≥—Ä–∞–º–º—ã</option>
                    <option value="100">100 –≥</option>
                    <option value="250">250 –≥</option>
                    <option value="500">500 –≥</option>
                </select>`;
        }else{
            el.innerHTML=`
                <b>${p.name}</b><br>${p.price} ‚ÇΩ
                <button onclick="addItem('${p.name}',${p.price})">–í –∫–æ—Ä–∑–∏–Ω—É</button>`;
        }
        items.appendChild(el);
    });
}

function back(){
    catalog.classList.add("hidden");
    main.classList.remove("hidden");
}

function addItem(name,price){
    cart.push({name,price,qty:1});
    renderCart();
}

function addTreat(name,price,grams){
    if(!grams) return;
    cart.push({
        name:`${name} (${grams} –≥)`,
        price:price*(grams/100),
        qty:1
    });
    renderCart();
}

function renderCart(){
    cartItems.innerHTML="";
    let sum=0;

    cart.forEach((i,idx)=>{
        sum+=i.price*i.qty;
        cartItems.innerHTML+=`
        <div class="cart-item">
            <div>${i.name}</div>
            <div class="qty">
                <button onclick="changeQty(${idx},-1)">‚àí</button>
                ${i.qty}
                <button onclick="changeQty(${idx},1)">+</button>
            </div>
        </div>`;
    });

    if(days.value>10) sum*=0.9;

    total.innerText=Math.round(sum)+" ‚ÇΩ";
    cart.classList.remove("hidden");
    tg.MainButton.show();
}

function changeQty(i,d){
    cart[i].qty+=d;
    if(cart[i].qty<=0) cart.splice(i,1);
    if(cart.length===0){
        cart.classList.add("hidden");
        tg.MainButton.hide();
    }
    renderCart();
}

tg.MainButton.onClick(()=>{
    let msg="üêæ –ù–û–í–´–ô –ó–ê–ö–ê–ó ZooGrand73\n\n";
    cart.forEach((i,n)=>msg+=`${n+1}. ${i.name} √ó ${i.qty}\n`);
    msg+=`
üêï ${petName.value}
üè† ${address.value}
üìÖ ${startDate.value} | ${days.value} —Å—É—Ç–æ–∫
‚è∞ ${checkIn.value} ‚Äì ${checkOut.value}
üí¨ ${comment.value}

üí∞ –ò—Ç–æ–≥–æ: ${total.innerText}`;
    tg.sendData(msg);
});
</script>

</body>
</html>
